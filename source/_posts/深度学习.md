---
title: 深度学习
date: 2023/2/23
categories:
  - 深度学习
tags:
  - 深度学习
  - pytorch
abbrlink: 48513
---

## 预备知识

### 矩阵计算

在深度学习相关的资料里面，标量就表示一个数，向量是由多个数组成的。

常规的导数求导没有什么难度，现在将导数扩展到向量，会出现四种情况：

![](https://cdn.jsdelivr.net/gh/gaofeng-lin/picture_bed/img/Snipaste_2023-03-02_22-49-16.png)

y为标量或向量；x为标量或向量

1、标量求导就不说了，高中常识；
2、y是标量，x是向量的情况。实际上就是y=f(x1,x2,...,xn)的意思。拿y=f(x1,x2)为例解释，有一个三维坐标轴体系，水平面的横轴和竖轴分别是x1、x2，立面上的轴是y，水平面上任意一个点(x1,x2)都对应y轴上的一个点，很明显这就是一个面，**因此他的导数是一个向量**，所以结果是横着写的。

![](https://cdn.jsdelivr.net/gh/gaofeng-lin/picture_bed/img/Snipaste_2023-03-02_22-54-05.png)

3、y是向量，x是标量的情况。这实际上就是【y1,y2,...,yn】=【f(x1),f(x2),...,f(xn)】，对x求导就是求出y=yi时那一个点上的斜率，**结果是标量**，所以结果是竖着写的。

![](https://cdn.jsdelivr.net/gh/gaofeng-lin/picture_bed/img/Snipaste_2023-03-02_22-55-43.png)

4、y、x都是向量的情况。根据上面描述，求导实际上就是求出了y=yi时，那一个平面形状边缘上的**向量**，因此是横着写的。

![](https://cdn.jsdelivr.net/gh/gaofeng-lin/picture_bed/img/Snipaste_2023-03-02_22-56-14.png)

------------------------------------

关于动手学习深度学习，自动微分章节里面2.5.1例子的理解[原链接](https://zh.d2l.ai/chapter_preliminaries/autograd.html)

我们对函数$y=2x^Tx$关于列向量x求导，假设变量x为 $x=[0,1,2,3]$

可以容易的得到y是标量，且值为28.
参考上面提到的四种情况，求导结果应该为向量。

可以把$y=2x^Tx$看作是$y=2x^2$，求导后为$4x$，那么带入$x=[0,1,2,3]$，最后的结果为$[0,4,8,12]$

## pytorch安装

### cuda安装
[原链接](https://zhuanlan.zhihu.com/p/94220564)

桌面右键打开英伟达控制面板，点击帮助->系统信息->组件

可以看到支持的版本，安装的cuda版本必须小于等于该版本

安装好cuda后，安装cuDNN。
版本要和cuda对应起来

### miniconda和pytorch安装

[原链接](https://zhuanlan.zhihu.com/p/174738684)


[miniconda的镜像](https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/)

要注意安装的是x86_64的版本，一开始装成的x86(32位，一直出问题)

安装pytorch的时候要进入[这里](https://pytorch.org/get-started/previous-versions/)。根据对应的cuda版本来下载，最然根据教程来验证是否安装成果。



### 安装jupyter notebook
上面的安装好以后，使用```conda activate d2l```，激活d2l环境。
用```conda install jupyter```安装一直卡在那，换pip安装。但是还是因为网速原因没成功，可以使用临时换源的办法：

```pip install jupyter -i https://pypi.tuna.tsinghua.edu.cn/simple```

### 导入torchvision出现错误

cuda和pythorch都安装成功的时候，且gpu也能正常使用。但是运行d2l里面的代码报错：
```
import torch 成功

import torchvision,报错

DLL:找不到模块
```

根据torch版本找到对应的torchvision，然后卸载torchvision再安装，显示没有这个版本。当时安装torch的时候，torchvision也安装了，且版本正确。

**解决办法：**
1. 先查看一下Pillow的版本
```
pip show Pillow
```

如果没有直接安装
```
pip install Pillow
```

如果有，先卸载
```
pip uninstall Pillow
```

再安装
```
pip install Pillow
```

然后检验torchvision是否正常
```
>>> import torchvision
>>> torchvision.__version__
'0.8.2'

```